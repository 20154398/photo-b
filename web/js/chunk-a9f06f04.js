(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a9f06f04"],{"408b":function(e,t,r){},"4df4":function(e,t,r){"use strict";var a=r("0366"),n=r("7b0b"),o=r("9bdd"),i=r("e95a"),s=r("50c4"),c=r("8418"),u=r("35a1");e.exports=function(e){var t,r,d,l,f,p,h=n(e),m="function"==typeof this?this:Array,v=arguments.length,y=v>1?arguments[1]:void 0,b=void 0!==y,x=u(h),j=0;if(b&&(y=a(y,v>2?arguments[2]:void 0,2)),void 0==x||m==Array&&i(x))for(t=s(h.length),r=new m(t);t>j;j++)p=b?y(h[j],j):h[j],c(r,j,p);else for(l=x.call(h),f=l.next,r=new m;!(d=f.call(l)).done;j++)p=b?o(l,y,[d.value,j],!0):d.value,c(r,j,p);return r.length=j,r}},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,r){var a=r("1d80"),n=r("577e"),o=r("5899"),i="["+o+"]",s=RegExp("^"+i+i+"*"),c=RegExp(i+i+"*$"),u=function(e){return function(t){var r=n(a(t));return 1&e&&(r=r.replace(s,"")),2&e&&(r=r.replace(c,"")),r}};e.exports={start:u(1),end:u(2),trim:u(3)}},7701:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-container",{staticClass:"container",attrs:{"my-expanded":e.expanded}},[r("el-header",{staticClass:"project-header-container"},[r("el-container",{staticClass:"project-header-wrapper",attrs:{direction:"vertical"}},[r("el-row",{attrs:{gutter:10,justify:"center",align:"middle"}},[r("el-col",{attrs:{span:24}},[r("el-button",{staticStyle:{position:"absolute",right:"10px",top:"0"},attrs:{icon:e.expanded?"el-icon-s-unfold":"el-icon-s-fold",type:"primary",circle:""},on:{click:e.expandMenu}})],1)],1),e.expanded?r("b",{staticClass:"project-header-text"},[e._v(e._s(e.selectProjectName))]):r("b",{staticClass:"project-header-text"},[e._v("任务清单")]),r("el-row",{directives:[{name:"show",rawName:"v-show",value:!e.expanded,expression:"!expanded"}],attrs:{justify:"center",align:"middle"}},[r("el-col",{attrs:{span:19}},[r("el-input",{attrs:{placeholder:"请输入任务名"},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})],1),r("el-col",{attrs:{span:5}},[r("el-button",{attrs:{icon:"el-icon-delete",type:"primary",circle:""},on:{click:function(t){return e.clean()}}})],1)],1)],1)],1),e.expanded?e._e():r("el-divider",{attrs:{direction:"horizontal"}}),r("el-footer",{directives:[{name:"show",rawName:"v-show",value:!e.expanded,expression:"!expanded"}],staticClass:"footer"},[r("el-tree",{ref:"tree",staticClass:"filter-tree",attrs:{data:e.projectList,props:e.defaultProps,load:e.loadNode,"highlight-current":!0,lazy:"","node-key":"id","filter-node-method":e.filterNode},on:{"node-click":e.nodeClick}})],1)],1)},n=[],o=r("5530");r("a4d3"),r("e01a"),r("d3b7"),r("d28b"),r("3ca3"),r("ddb0"),r("fb6a"),r("b0c0"),r("a630");function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function s(e,t){if(e){if("string"===typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}function c(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=s(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==r["return"]||r["return"]()}finally{if(c)throw o}}}}r("4de4"),r("a9e3");var u=r("2f62"),d={name:"projectList",props:{expanded:{type:Boolean,default:!1}},watch:{input:function(e){""===e&&this.clean(),this.$refs.tree.filter(e)}},data:function(){return{selectProjectName:"当前无选中",input:"",projectList:[],showList:[],rowClass:{backgroundColor:"#ffffff"},defaultProps:{label:"name",isLeaf:"leaf"},treeDataCache:[]}},methods:{expandMenu:function(){this.$emit("expanded")},nodeClick:function(e,t,r){1===e.level&&this.$router.push({name:"project",params:{pid:e.id}}),2===e.level&&this.$router.push({name:"task",params:{tid:e.id,pid:t.parent.data.id,deptId:e.deptId}});var a=e.name;while(0!==t.parent.level)a=t.parent.data.name+"↓"+a,t=t.parent;this.selectProjectName="当前选中↧"+a},filterNode:function(e,t){return!e||(1===t.type||-1!==t.name.indexOf(e))},loadNode:function(e,t){var r=this;if(0===e.level)return t(this.projectList);this.axiosSearchTask(e.data.id).then((function(e){return 200===e.data.code?(r.treeDataCache=e.data.data,t(e.data.data)):t([])})).finally((function(){var e=r.$route.params.pid;r.$route.params.tid&&(r.treeDataCache.some((function(t){if(t.id===Number(r.$route.params.tid))return r.selectProjectName=r.selectProjectName+"↓"+t.name,e=r.$route.params.tid,!0}))?r.$refs.tree.setCurrentKey(e):r.$router.push("/home"))}))},clean:function(){this.input="",this.$refs.tree.setCurrentKey(null),this.selectProjectName="当前无选中",this.$router.push("/home")},axiosSearchProject:function(){return this.axiosP.get("project/search")},axiosSearchTask:function(e){return this.axiosP.get("task/search/"+e)},updateProject:function(){var e=this;this.axiosSearchProject().then((function(t){200===t.data.code?e.projectList=t.data.data:e.$router.push("/home");var r,a=!1,n=c(e.projectList);try{for(n.s();!(r=n.n()).done;){var o=r.value;o.id==e.$route.params.pid&&(e.selectProjectName="当前选中↧"+o.name,a=!0)}}catch(i){n.e(i)}finally{n.f()}a?e.$nextTick((function(){e.$refs.tree.store.setDefaultExpandedKeys([e.$route.params.pid])})):e.$router.push("/home")}))},updateTask:function(){var e=this;this.axiosSearchTask(this.$route.params.pid).then((function(t){if(200===t.data.code){e.$refs.tree.updateKeyChildren(e.$route.params.pid,t.data.data);var r=e.$route.params.pid;if(e.$route.params.tid){var a,n=c(t.data.data);try{for(n.s();!(a=n.n()).done;){var o=a.value;o.id==e.$route.params.tid&&(e.selectProjectName=e.selectProjectName+"↓"+o.name,r=e.$route.params.tid)}}catch(i){n.e(i)}finally{n.f()}r===e.$route.params.pid&&e.$router.push("/home")}e.$refs.tree.setCurrentKey(r)}else e.$router.push("/home")}))}},mounted:function(){var e=this;this.eventBus.$on("updateProjectListKeyChildren",(function(t){e.updateTask()})),this.updateProject()},destroyed:function(){this.eventBus.$off("updateProjectListKeyChildren")},computed:Object(o["a"])({},Object(u["b"])({selectedProject:function(e){return e.global.selectedProject}}))},l=d,f=(r("d130"),r("2877")),p=Object(f["a"])(l,a,n,!1,null,"0d23fc2e",null);t["default"]=p.exports},"9bdd":function(e,t,r){var a=r("825a"),n=r("2a62");e.exports=function(e,t,r,o){try{return o?t(a(r)[0],r[1]):t(r)}catch(i){throw n(e),i}}},a630:function(e,t,r){var a=r("23e7"),n=r("4df4"),o=r("1c7e"),i=!o((function(e){Array.from(e)}));a({target:"Array",stat:!0,forced:i},{from:n})},a9e3:function(e,t,r){"use strict";var a=r("83ab"),n=r("da84"),o=r("94ca"),i=r("6eeb"),s=r("5135"),c=r("c6b6"),u=r("7156"),d=r("d9b5"),l=r("c04e"),f=r("d039"),p=r("7c73"),h=r("241c").f,m=r("06cf").f,v=r("9bf2").f,y=r("58a8").trim,b="Number",x=n[b],j=x.prototype,g=c(p(j))==b,N=function(e){if(d(e))throw TypeError("Cannot convert a Symbol value to a number");var t,r,a,n,o,i,s,c,u=l(e,"number");if("string"==typeof u&&u.length>2)if(u=y(u),t=u.charCodeAt(0),43===t||45===t){if(r=u.charCodeAt(2),88===r||120===r)return NaN}else if(48===t){switch(u.charCodeAt(1)){case 66:case 98:a=2,n=49;break;case 79:case 111:a=8,n=55;break;default:return+u}for(o=u.slice(2),i=o.length,s=0;s<i;s++)if(c=o.charCodeAt(s),c<48||c>n)return NaN;return parseInt(o,a)}return+u};if(o(b,!x(" 0o1")||!x("0b1")||x("+0x1"))){for(var $,w=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof w&&(g?f((function(){j.valueOf.call(r)})):c(r)!=b)?u(new x(N(t)),r,w):N(t)},C=a?h(x):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),A=0;C.length>A;A++)s(x,$=C[A])&&!s(w,$)&&v(w,$,m(x,$));w.prototype=j,j.constructor=w,i(n,b,w)}},d130:function(e,t,r){"use strict";r("408b")},fb6a:function(e,t,r){"use strict";var a=r("23e7"),n=r("861d"),o=r("e8b5"),i=r("23cb"),s=r("50c4"),c=r("fc6a"),u=r("8418"),d=r("b622"),l=r("1dde"),f=l("slice"),p=d("species"),h=[].slice,m=Math.max;a({target:"Array",proto:!0,forced:!f},{slice:function(e,t){var r,a,d,l=c(this),f=s(l.length),v=i(e,f),y=i(void 0===t?f:t,f);if(o(l)&&(r=l.constructor,"function"!=typeof r||r!==Array&&!o(r.prototype)?n(r)&&(r=r[p],null===r&&(r=void 0)):r=void 0,r===Array||void 0===r))return h.call(l,v,y);for(a=new(void 0===r?Array:r)(m(y-v,0)),d=0;v<y;v++,d++)v in l&&u(a,d,l[v]);return a.length=d,a}})}}]);